<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donn√©es par Pays - Dashboard Fiscal Trump</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        /* M√™me CSS que les autres pages */
        :root {
            --neon-blue: #00f3ff;
            --neon-cyan: #00ffea;
            --neon-purple: #b967ff;
            --dark-bg: #0a0a0a;
            --dark-card: #111111;
            --dark-border: #1a1a1a;
            --grid-color: rgba(0, 243, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--dark-bg);
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px) 0 0 / 20px 20px,
                linear-gradient(0deg, var(--grid-color) 1px, transparent 1px) 0 0 / 20px 20px;
            z-index: -1;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(20px, 20px); }
        }

        .cyberpunk-nav {
            background: rgba(10, 10, 10, 0.9) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--neon-blue);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
            font-family: 'Orbitron', sans-serif;
        }

        .cyberpunk-nav .navbar-brand {
            color: var(--neon-cyan) !important;
            font-weight: 900;
            text-shadow: 0 0 10px var(--neon-cyan);
            letter-spacing: 1px;
        }

        .cyberpunk-nav .nav-link {
            color: #fff !important;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .cyberpunk-nav .nav-link:hover, .cyberpunk-nav .nav-link.active {
            color: var(--neon-blue) !important;
            text-shadow: 0 0 8px var(--neon-blue);
        }

        .cyberpunk-nav .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--neon-blue);
            box-shadow: 0 0 8px var(--neon-blue);
        }

        .dashboard-header {
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(185, 103, 255, 0.1));
            color: white;
            padding: 2rem 2rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--neon-blue);
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .dashboard-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(0,243,255,0.05)"/></svg>');
            background-size: cover;
        }

        .dashboard-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            text-shadow: 0 0 15px var(--neon-cyan);
            letter-spacing: 2px;
        }

        .cyber-card {
            background: var(--dark-card);
            border: 1px solid var(--dark-border);
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .cyber-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .cyber-card:hover::before {
            left: 100%;
        }

        .cyber-card:hover {
            border-color: var(--neon-blue);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            transform: translateY(-5px);
        }

        .cyber-card .card-header {
            background: rgba(20, 20, 20, 0.8);
            border-bottom: 1px solid var(--neon-blue);
            color: var(--neon-cyan);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            padding: 1rem 1.25rem;
        }

        .cyber-card .card-body {
            padding: 1.5rem;
        }

        .cyber-badge {
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid var(--neon-blue);
            color: var(--neon-cyan);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            text-shadow: 0 0 5px var(--neon-cyan);
            box-shadow: 0 0 8px rgba(0, 243, 255, 0.3);
        }

        .glow-text {
            text-shadow: 0 0 10px currentColor;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 243, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 243, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 243, 255, 0); }
        }

        .cyber-footer {
            background: rgba(10, 10, 10, 0.9);
            border-top: 1px solid var(--neon-blue);
            color: #aaa;
            padding: 1.5rem 0;
            margin-top: 3rem;
            font-family: 'Rajdhani', sans-serif;
        }

        .scan-line {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
            box-shadow: 0 0 10px var(--neon-cyan);
            z-index: 1000;
            animation: scan 3s linear infinite;
        }

        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }

        .terminal-text {
            font-family: 'Courier New', monospace;
            color: var(--neon-cyan);
            text-shadow: 0 0 5px var(--neon-cyan);
        }

        .chart-container {
            position: relative;
            height: 400px; /* Hauteur fixe pour le conteneur du graphique */
            width: 100%;
        }

        .country-flag {
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }

        .impact-high {
            color: #ff0066;
            text-shadow: 0 0 5px #ff0066;
        }

        .impact-medium {
            color: #ffaa00;
            text-shadow: 0 0 5px #ffaa00;
        }

        .impact-low {
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .form-control, .form-select {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid var(--neon-blue);
            color: #fff;
        }

        .form-control:focus, .form-select:focus {
            background: rgba(20, 20, 20, 0.9);
            border-color: var(--neon-cyan);
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
            color: #fff;
        }

        .table-dark {
            --bs-table-bg: rgba(20, 20, 20, 0.8);
            --bs-table-border-color: var(--neon-blue);
        }

        .table-dark tbody tr:hover {
            background-color: rgba(0, 243, 255, 0.1);
        }
        
        /* Style pour la carte Leaflet */
        #worldMap {
            height: 400px;
            border-radius: 5px;
            border: 1px solid var(--neon-blue);
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="scan-line"></div>

    <nav class="navbar navbar-expand-lg navbar-dark cyberpunk-nav">
        <div class="container">
            <a class="navbar-brand glow-text" href="index.html">
                <i class="fas fa-chart-bar me-2"></i>TRUMP FISCAL DASHBOARD
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html"><i class="fas fa-home me-1"></i>ACCUEIL</a></li>
                    <li class="nav-item"><a class="nav-link" href="historique.html"><i class="fas fa-history me-1"></i>ANALYSE HISTORIQUE</a></li>
                    <li class="nav-item"><a class="nav-link active" href="pays.html"><i class="fas fa-globe-americas me-1"></i>DONN√âES PAR PAYS</a></li>
                    <li class="nav-item"><a class="nav-link" href="categories.html"><i class="fas fa-chart-pie me-1"></i>ANALYSE PAR CAT√âGORIES</a></li>
                    <li class="nav-item"><a class="nav-link" href="real-time.html"><i class="fas fa-bolt me-1"></i>TEMPS R√âEL</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="dashboard-header">
        <div class="container text-center">
            <h1 class="display-4 mb-3">DONN√âES PAR PAYS</h1>
            <p class="lead terminal-text">IMPACT FISCAL PAR PAYS ET R√âGION</p>
            <div class="d-flex justify-content-center align-items-center mt-3">
                <span class="cyber-badge me-3 pulse">
                    <i class="fas fa-circle me-1"></i>SYST√àME EN LIGNE
                </span>
                <span class="text-white-50">DERNI√àRE MISE √Ä JOUR: <span id="globalUpdateTime" class="terminal-text">--:--:--</span></span>
            </div>
        </div>
    </div>

    <div class="container mt-4">
        <!-- Filtres -->
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <select class="form-select" id="regionFilter">
                    <option value="">TOUTES LES R√âGIONS</option>
                    <option value="europe">EUROPE</option>
                    <option value="asie">ASIE</option>
                    <option value="amerique">AM√âRIQUE</option>
                    <option value="afrique">AFRIQUE</option>
                    <option value="moyen-orient">MOYEN-ORIENT</option>
                </select>
            </div>
            <div class="col-md-4 mb-3">
                <select class="form-select" id="impactFilter">
                    <option value="">TOUS LES IMPACTS</option>
                    <option value="eleve">IMPACT √âLEV√â</option>
                    <option value="moyen">IMPACT MOYEN</option>
                    <option value="faible">IMPACT FAIBLE</option>
                </select>
            </div>
            <div class="col-md-4 mb-3">
                <input type="text" class="form-control" id="searchCountry" placeholder="RECHERCHER UN PAYS...">
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="cyber-card">
                    <div class="card-header">
                        <h5 class="glow-text">CARTE DES IMPACTS FISCAUX</h5>
                    </div>
                    <div class="card-body p-0">
                        <div id="worldMap"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="cyber-card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0 glow-text">TOP 10 DES PAYS LES PLUS IMPACT√âS</h5>
                        <small class="text-muted">TAUX TARIFAIRE MOYEN</small>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="topCountriesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <div class="cyber-card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0 glow-text">TABLEAU DES PAYS</h5>
                        <small class="text-muted">DERNI√àRE MISE √Ä JOUR: <span id="lastUpdate" class="terminal-text">--:--:--</span></small>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        <th>PAYS</th>
                                        <th>R√âGION</th>
                                        <th>TAUX TARIFAIRE</th>
                                        <th>IMPACT COMMERCIAL</th>
                                        <th>MESURES SP√âCIFIQUES</th>
                                        <th>√âVOLUTION</th>
                                    </tr>
                                </thead>
                                <tbody id="countriesTableBody">
                                    <!-- Les donn√©es seront charg√©es via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="cyber-footer">
        <div class="container text-center">
            <p class="mb-0 terminal-text">DASHBOARD FISCAL TRUMP &copy; 2025 - SYST√àME CYBERNETIQUE</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Donn√©es des pays
        const countriesData = [
            { name: 'Chine', region: 'asie', tariffRate: 25, impact: 'eleve', commercialImpact: 'IMPACT √âLEV√â', specificMeasures: ['Tarifs acier/aluminium (25%)', 'Taxes produits √©lectroniques'], evolution: '+15%', coords: [35.8617, 104.1954] },
            { name: 'Union Europ√©enne', region: 'europe', tariffRate: 10, impact: 'eleve', commercialImpact: 'IMPACT √âLEV√â', specificMeasures: ['Tarifs acier (25%)', 'Taxes produits agricoles'], evolution: '+8%', coords: [50.0, 10.0] },
            { name: 'Canada', region: 'amerique', tariffRate: 10, impact: 'moyen', commercialImpact: 'IMPACT MOYEN', specificMeasures: ['USMCA', 'Tarifs aluminium'], evolution: '+5%', coords: [56.1304, -106.3468] },
            { name: 'Mexique', region: 'amerique', tariffRate: 7.5, impact: 'moyen', commercialImpact: 'IMPACT MOYEN', specificMeasures: ['USMCA', 'Tarifs aluminium'], evolution: '+3%', coords: [23.6345, -102.5528] },
            { name: 'Japon', region: 'asie', tariffRate: 5, impact: 'faible', commercialImpact: 'IMPACT FAIBLE', specificMeasures: ['Accord commercial limit√©'], evolution: '+2%', coords: [36.2048, 138.2529] },
            { name: 'Cor√©e du Sud', region: 'asie', tariffRate: 8, impact: 'moyen', commercialImpact: 'IMPACT MOYEN', specificMeasures: ['Ren√©gociation KORUS'], evolution: '+4%', coords: [35.9078, 127.7669] },
            { name: 'Royaume-Uni', region: 'europe', tariffRate: 6, impact: 'faible', commercialImpact: 'IMPACT FAIBLE', specificMeasures: ['Accord post-Brexit'], evolution: '+1%', coords: [55.3781, -3.4360] },
            { name: 'Inde', region: 'asie', tariffRate: 12, impact: 'moyen', commercialImpact: 'IMPACT MOYEN', specificMeasures: ['Tarifs r√©ciproques'], evolution: '+6%', coords: [20.5937, 78.9629] },
            { name: 'Br√©sil', region: 'amerique', tariffRate: 14, impact: 'eleve', commercialImpact: 'IMPACT √âLEV√â', specificMeasures: ['Tarifs automobiles'], evolution: '+12%', coords: [-14.2350, -51.9253] },
            { name: 'Australie', region: 'asie', tariffRate: 4, impact: 'faible', commercialImpact: 'IMPACT FAIBLE', specificMeasures: ['Accord commercial'], evolution: '+1%', coords: [-25.2744, 133.7751] }
        ];

        let map;
        let mapMarkers = [];
        let topCountriesChart;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initializeMap();
            initializeChart();
            setupFilters();
            updateAllDisplays(countriesData); // Affiche toutes les donn√©es au chargement
            startAutoUpdate();
        });

        function initializeMap() {
            if (!document.getElementById('worldMap')) return;

            map = L.map('worldMap').setView([30, 0], 2);
            
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: 'abcd',
                maxZoom: 19
            }).addTo(map);
            
            // Ajout d'une l√©gende
            const legend = L.control({position: 'bottomright'});
            legend.onAdd = function(map) {
                const div = L.DomUtil.create('div', 'info legend');
                div.style.backgroundColor = 'rgba(10, 10, 10, 0.8)';
                div.style.padding = '10px';
                div.style.border = '1px solid var(--neon-blue)';
                div.style.borderRadius = '5px';
                div.style.color = '#fff';
                div.style.fontFamily = "'Rajdhani', sans-serif";
                
                div.innerHTML = '<h4 style="margin: 0 0 5px 0; color: var(--neon-cyan);">Impact fiscal</h4>';
                div.innerHTML += '<div><span style="display: inline-block; width: 12px; height: 12px; background: #ff0066; border-radius: 50%; margin-right: 5px;"></span>√âlev√©</div>';
                div.innerHTML += '<div><span style="display: inline-block; width: 12px; height: 12px; background: #ffaa00; border-radius: 50%; margin-right: 5px;"></span>Moyen</div>';
                div.innerHTML += '<div><span style="display: inline-block; width: 12px; height: 12px; background: #00ff00; border-radius: 50%; margin-right: 5px;"></span>Faible</div>';
                
                return div;
            };
            legend.addTo(map);
        }

        function updateMapMarkers(countries) {
            // Supprimer les anciens marqueurs
            mapMarkers.forEach(marker => map.removeLayer(marker));
            mapMarkers = [];

            // Ajouter les nouveaux marqueurs
            countries.forEach(country => {
                if (country.coords) {
                    const color = getImpactColor(country.impact);
                    const marker = L.circleMarker(country.coords, {
                        radius: 8 + (country.tariffRate / 2),
                        fillColor: color,
                        color: '#fff',
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.7
                    }).addTo(map);
                    
                    marker.bindPopup(`
                        <div style="font-family: 'Rajdhani', sans-serif; color: #333;">
                            <h5 style="margin: 0 0 5px 0; color: #00aaff;">${country.name}</h5>
                            <p style="margin: 5px 0;">R√©gion: ${getRegionName(country.region)}</p>
                            <p style="margin: 5px 0;">Taux tarifaire: <strong>${country.tariffRate}%</strong></p>
                            <p style="margin: 5px 0;">Impact: <span style="color: ${color}; font-weight: bold;">${country.commercialImpact}</span></p>
                            <p style="margin: 5px 0;">√âvolution: <strong style="color: ${country.evolution.includes('+') ? '#ff0066' : '#00ff00'};">${country.evolution}</strong></p>
                        </div>
                    `);
                    mapMarkers.push(marker);
                }
            });
        }

        function initializeChart() {
            const ctx = document.getElementById('topCountriesChart');
            if (!ctx) return;

            topCountriesChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'TAUX TARIFAIRE MOYEN (%)',
                        data: [],
                        backgroundColor: [],
                        borderColor: '#00aaff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'TAUX TARIFAIRE (%)', color: '#00f3ff' },
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#fff' },
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        tooltip: {
                            backgroundColor: 'rgba(10, 10, 10, 0.8)',
                            titleColor: '#00f3ff',
                            bodyColor: '#fff',
                            borderColor: '#00f3ff',
                            borderWidth: 1
                        },
                        legend: { display: false }
                    }
                }
            });
        }

        function updateChart(countries) {
            if (!topCountriesChart) return;

            const sortedCountries = [...countries].sort((a, b) => b.tariffRate - a.tariffRate).slice(0, 10);
            
            topCountriesChart.data.labels = sortedCountries.map(c => c.name);
            topCountriesChart.data.datasets[0].data = sortedCountries.map(c => c.tariffRate);
            topCountriesChart.data.datasets[0].backgroundColor = sortedCountries.map(c => getImpactColor(c.impact));
            topCountriesChart.update();
        }

        function displayCountriesTable(countries) {
            const tbody = document.getElementById('countriesTableBody');
            if (!tbody) return;

            tbody.innerHTML = '';
            countries.forEach(country => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><span class="country-flag">${getFlagEmoji(country.name)}</span> ${country.name}</td>
                    <td>${getRegionName(country.region)}</td>
                    <td>${country.tariffRate}%</td>
                    <td><span class="cyber-badge ${getImpactBadgeClass(country.impact)}">${country.commercialImpact}</span></td>
                    <td>${country.specificMeasures.join(', ')}</td>
                    <td class="${country.evolution.includes('+') ? 'impact-high' : 'impact-low'}">${country.evolution}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateAllDisplays(countries) {
            displayCountriesTable(countries);
            updateChart(countries);
            updateMapMarkers(countries);
        }

        function setupFilters() {
            document.getElementById('regionFilter')?.addEventListener('change', filterData);
            document.getElementById('impactFilter')?.addEventListener('change', filterData);
            document.getElementById('searchCountry')?.addEventListener('input', filterData);
        }

        function filterData() {
            const regionFilter = document.getElementById('regionFilter')?.value;
            const impactFilter = document.getElementById('impactFilter')?.value;
            const searchFilter = document.getElementById('searchCountry')?.value.toLowerCase();

            const filtered = countriesData.filter(country => {
                const regionMatch = !regionFilter || country.region === regionFilter;
                const impactMatch = !impactFilter || country.impact === impactFilter;
                const searchMatch = !searchFilter || country.name.toLowerCase().includes(searchFilter);
                return regionMatch && impactMatch && searchMatch;
            });

            updateAllDisplays(filtered);
        }

        function startAutoUpdate() {
            setInterval(() => {
                updateTimestamps();
                // Simulation de mise √† jour des donn√©es
                countriesData.forEach(country => {
                    const variation = (Math.random() - 0.5) * 2;
                    country.tariffRate = Math.max(0, Math.min(100, country.tariffRate + variation));
                    const evolutionVariation = (Math.random() - 0.5) * 2;
                    const currentEvolution = parseFloat(country.evolution);
                    country.evolution = (currentEvolution + evolutionVariation > 0 ? '+' : '') + (currentEvolution + evolutionVariation).toFixed(1) + '%';
                });
                filterData(); // R√©appliquer les filtres pour mettre √† jour l'affichage
            }, 30000);
            updateTimestamps();
        }

        function updateTimestamps() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR');
            const dateString = now.toLocaleDateString('fr-FR');
            const globalTimeEl = document.getElementById('globalUpdateTime');
            const lastUpdateEl = document.getElementById('lastUpdate');
            if (globalTimeEl) globalTimeEl.textContent = `${dateString} ${timeString}`;
            if (lastUpdateEl) lastUpdateEl.textContent = timeString;
        }

        // Fonctions utilitaires
        function getFlagEmoji(countryName) {
            const flags = { 'Chine': 'üá®üá≥', 'Union Europ√©enne': 'üá™üá∫', 'Canada': 'üá®üá¶', 'Mexique': 'üá≤üáΩ', 'Japon': 'üáØüáµ', 'Cor√©e du Sud': 'üá∞üá∑', 'Royaume-Uni': 'üá¨üáß', 'Inde': 'üáÆüá≥', 'Br√©sil': 'üáßüá∑', 'Australie': 'üá¶üá∫' };
            return flags[countryName] || 'üè¥';
        }
        function getRegionName(region) { const regions = { 'europe': 'EUROPE', 'asie': 'ASIE', 'amerique': 'AM√âRIQUE' }; return regions[region] || region; }
        function getImpactBadgeClass(impact) { const classes = { 'eleve': 'impact-high', 'moyen': 'impact-medium', 'faible': 'impact-low' }; return classes[impact] || ''; }
        function getImpactColor(impact) { const colors = { 'eleve': '#ff0066', 'moyen': '#ffaa00', 'faible': '#00ff00' }; return colors[impact] || '#00f3ff'; }
    </script>
</body>
</html>